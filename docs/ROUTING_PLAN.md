# ğŸ—ºï¸ ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°æ§‹é€ ã®æ”¹å–„è¨ˆç”»

## ç¾åœ¨ã®ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ï¼ˆ2025 å¹´ 11 æœˆ 8 æ—¥ï¼‰

### ç·´ç¿’é–¢é€£

```
/admin/dashboard              - å½¹å“¡ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
/member/dashboard             - éƒ¨å“¡ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
/member/practice-request      - ç·´ç¿’å¸Œæœ›æå‡º
/practice-schedule-admin      - ç·´ç¿’ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«è¨­å®šï¼ˆå½¹å“¡ï¼‰
```

### ãƒ©ã‚¤ãƒ–ãƒ»ã‚¤ãƒ™ãƒ³ãƒˆé–¢é€£

```
/event_create                 - ã‚¤ãƒ™ãƒ³ãƒˆä½œæˆï¼ˆå½¹å“¡ï¼‰âš ï¸ ãƒ«ãƒ¼ãƒˆç›´ä¸‹
/entry_form                   - ãƒ©ã‚¤ãƒ–å‡ºæ¼”ç”³ã—è¾¼ã¿ï¼ˆãƒãƒ³ãƒ‰ï¼‰âš ï¸ ãƒ«ãƒ¼ãƒˆç›´ä¸‹
/timetable-request            - å‡ºå¸­å¯èƒ½æ™‚é–“ç”³è«‹ï¼ˆéƒ¨å“¡ï¼‰âš ï¸ ãƒ«ãƒ¼ãƒˆç›´ä¸‹
/timetable                    - ã‚¿ã‚¤ãƒ ãƒ†ãƒ¼ãƒ–ãƒ«è¡¨ç¤ºï¼ˆå…¨å“¡ï¼‰âš ï¸ ãƒ«ãƒ¼ãƒˆç›´ä¸‹
```

---

## ğŸ¯ æ¨å¥¨ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°æ§‹é€ ï¼ˆå°†æ¥çš„ãªç§»è¡Œå…ˆï¼‰

### ã‚ªãƒ—ã‚·ãƒ§ãƒ³ A: å½¹å‰²ãƒ™ãƒ¼ã‚¹ï¼ˆã‚·ãƒ³ãƒ—ãƒ«ãƒ»æ¨å¥¨ï¼‰

```
/admin/
  â”œâ”€ dashboard              - å½¹å“¡ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
  â”œâ”€ practice-schedule      - ç·´ç¿’ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«è¨­å®š
  â”œâ”€ event/
  â”‚   â”œâ”€ create            - ã‚¤ãƒ™ãƒ³ãƒˆä½œæˆ
  â”‚   â””â”€ [id]/
  â”‚       â””â”€ timetable-create  - ã‚¿ã‚¤ãƒ ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ
  â””â”€ members/
      â””â”€ new               - éƒ¨å“¡è¿½åŠ 

/member/
  â”œâ”€ dashboard             - éƒ¨å“¡ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
  â”œâ”€ practice-request      - ç·´ç¿’å¸Œæœ›æå‡º
  â”œâ”€ event-entry           - ãƒ©ã‚¤ãƒ–å‡ºæ¼”ç”³ã—è¾¼ã¿
  â””â”€ availability          - å‡ºå¸­å¯èƒ½æ™‚é–“ç”³è«‹

/events/
  â””â”€ [id]/
      â””â”€ timetable         - ã‚¿ã‚¤ãƒ ãƒ†ãƒ¼ãƒ–ãƒ«è¡¨ç¤ºï¼ˆå…¬é–‹ï¼‰
```

**ãƒ¡ãƒªãƒƒãƒˆ:**

- âœ… å½¹å‰²ï¼ˆadmin/memberï¼‰ã§æ˜ç¢ºã«åˆ†ã‹ã‚Œã¦ã„ã‚‹
- âœ… æ—¢å­˜ã®æ§‹é€ ã‹ã‚‰ã®ç§»è¡ŒãŒå®¹æ˜“
- âœ… æ¨©é™ç®¡ç†ãŒã—ã‚„ã™ã„

**ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ:**

- âŒ ã‚¤ãƒ™ãƒ³ãƒˆ ID ãŒè¤‡æ•°ç®‡æ‰€ã§ä½¿ã‚ã‚Œã‚‹
- âŒ å…¬é–‹ãƒšãƒ¼ã‚¸ï¼ˆ/eventsï¼‰ã¨ã®ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãŒåˆ†é›¢

---

### ã‚ªãƒ—ã‚·ãƒ§ãƒ³ B: æ©Ÿèƒ½ãƒ™ãƒ¼ã‚¹ï¼ˆREST é¢¨ï¼‰

```
/admin/
  â”œâ”€ dashboard
  â”œâ”€ practice-schedule
  â””â”€ members/new

/member/
  â””â”€ dashboard

/events/
  â”œâ”€ create                           - ã‚¤ãƒ™ãƒ³ãƒˆä½œæˆï¼ˆå½¹å“¡ã®ã¿ï¼‰
  â””â”€ [eventId]/
      â”œâ”€ entry                        - å‡ºæ¼”ç”³ã—è¾¼ã¿
      â”œâ”€ availability                 - å‡ºå¸­æ™‚é–“ç”³è«‹
      â”œâ”€ timetable                    - ã‚¿ã‚¤ãƒ ãƒ†ãƒ¼ãƒ–ãƒ«è¡¨ç¤º
      â””â”€ admin/
          â””â”€ timetable-create         - ã‚¿ã‚¤ãƒ ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆï¼ˆå½¹å“¡ï¼‰

/practice/
  â”œâ”€ schedule                         - ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«è¡¨ç¤º
  â””â”€ request                          - å¸Œæœ›æå‡º
```

**ãƒ¡ãƒªãƒƒãƒˆ:**

- âœ… RESTful ãªè¨­è¨ˆ
- âœ… ã‚¤ãƒ™ãƒ³ãƒˆ ID ã‚’ä¸­å¿ƒã«ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãŒé›†ç´„
- âœ… URL ã‹ã‚‰æ©Ÿèƒ½ãŒåˆ†ã‹ã‚Šã‚„ã™ã„

**ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ:**

- âŒ æ—¢å­˜æ§‹é€ ã‹ã‚‰ã®ç§»è¡Œã‚³ã‚¹ãƒˆãŒé«˜ã„
- âŒ æ¨©é™ãƒã‚§ãƒƒã‚¯ãŒè¤‡é›‘ã«ãªã‚‹å¯èƒ½æ€§

---

## ğŸ“ ç§»è¡Œè¨ˆç”»ï¼ˆæ®µéšçš„ã‚¢ãƒ—ãƒ­ãƒ¼ãƒï¼‰

### ãƒ•ã‚§ãƒ¼ã‚º 1: ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãƒªãƒ³ã‚¯è¿½åŠ ï¼ˆâœ… å®Œäº†ï¼‰

- [x] `/admin/dashboard` ã«ãƒ©ã‚¤ãƒ–é–¢é€£ãƒªãƒ³ã‚¯è¿½åŠ 
- [x] `/member/dashboard` ã«ãƒ©ã‚¤ãƒ–é–¢é€£ãƒªãƒ³ã‚¯è¿½åŠ 
- [x] æ—¢å­˜ã®ãƒ«ãƒ¼ãƒˆã¯ãã®ã¾ã¾ç¶­æŒ

### ãƒ•ã‚§ãƒ¼ã‚º 2: ã‚¨ã‚¤ãƒªã‚¢ã‚¹ä½œæˆï¼ˆæ¨å¥¨ï¼‰

Next.js ã® `rewrites` ã¾ãŸã¯ `redirects` ã‚’ä½¿ã£ã¦ã€æ–°ã—ã„ãƒ‘ã‚¹ã‹ã‚‰æ—¢å­˜ã®ãƒšãƒ¼ã‚¸ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ

```typescript
// next.config.ts
export default {
  async rewrites() {
    return [
      {
        source: "/member/event-entry",
        destination: "/entry_form",
      },
      {
        source: "/member/availability",
        destination: "/timetable-request",
      },
      {
        source: "/admin/event/create",
        destination: "/event_create",
      },
      {
        source: "/events/:id/timetable",
        destination: "/timetable",
      },
    ];
  },
};
```

### ãƒ•ã‚§ãƒ¼ã‚º 3: ãƒ•ã‚¡ã‚¤ãƒ«ç§»å‹•ï¼ˆé•·æœŸçš„ï¼‰

1. `/app/entry_form/` â†’ `/app/member/event-entry/`
2. `/app/timetable-request/` â†’ `/app/member/availability/`
3. `/app/event_create/` â†’ `/app/admin/event/create/`
4. `/app/timetable/` â†’ `/app/events/[id]/timetable/`

**æ³¨æ„:**

- æ—¢å­˜ã®ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ã‚„ãƒªãƒ³ã‚¯ãŒå£Šã‚Œã‚‹å¯èƒ½æ€§ã‚ã‚Š
- ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆè¨­å®šã‚’æ®‹ã™ã“ã¨

---

## ğŸ” æ¨©é™ç®¡ç†ã®è€ƒæ…®

### å½¹å“¡å°‚ç”¨ãƒšãƒ¼ã‚¸

- `/admin/*` - middleware ã§ `member.executive === true` ã‚’ãƒã‚§ãƒƒã‚¯
- `/event_create` - ç¾åœ¨ã¯èª°ã§ã‚‚ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ï¼Ÿè¦ç¢ºèª

### ãƒãƒ³ãƒ‰ãƒ¡ãƒ³ãƒãƒ¼å°‚ç”¨ãƒšãƒ¼ã‚¸

- `/entry_form` - band_members ãƒ†ãƒ¼ãƒ–ãƒ«ã«ç™»éŒ²ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
- ç¾åœ¨ã®å®Ÿè£…ã§ã¯ãƒ­ã‚°ã‚¤ãƒ³å¿…é ˆ + ãƒãƒ³ãƒ‰æ‰€å±ãƒã‚§ãƒƒã‚¯æ¸ˆã¿

### å…¨å“¡ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½

- `/timetable` - èª°ã§ã‚‚é–²è¦§å¯èƒ½ï¼ˆå…¬é–‹æƒ…å ±ï¼‰

---

## ğŸ’¡ æ¨å¥¨: å½“é¢ã®å¯¾å¿œ

### ã™ãã«ã§ãã‚‹ã“ã¨ï¼ˆä»Šå›å®Ÿè£…æ¸ˆã¿ï¼‰

1. âœ… ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«ãƒªãƒ³ã‚¯è¿½åŠ 
2. âœ… è¦–è¦šçš„ãªåŒºåˆ¥ï¼ˆè‰²åˆ†ã‘ï¼‰
   - ç·´ç¿’é–¢é€£: é’è‰²ãƒœãƒ¼ãƒ€ãƒ¼
   - ãƒ©ã‚¤ãƒ–å‡ºæ¼”ç”³ã—è¾¼ã¿: ã‚ªãƒ¬ãƒ³ã‚¸è‰²ãƒœãƒ¼ãƒ€ãƒ¼
   - å‡ºå¸­æ™‚é–“ç”³è«‹: ç·‘è‰²ãƒœãƒ¼ãƒ€ãƒ¼

### æ¬¡ã«ã‚„ã‚‹ã¹ãã“ã¨ï¼ˆå„ªå…ˆåº¦é †ï¼‰

1. **event_id ã‚’ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰ã—ãªã„**

   - ç¾åœ¨: `const event_id = "evt_welcome_26";`
   - æ”¹å–„: ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¾ãŸã¯ãƒ‘ã‚¹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‹ã‚‰å–å¾—
   - ä¾‹: `/entry_form?event_id=evt_welcome_26` ã¾ãŸã¯ `/events/evt_welcome_26/entry`

2. **ã‚¤ãƒ™ãƒ³ãƒˆä¸€è¦§ãƒšãƒ¼ã‚¸ã®ä½œæˆ**

   - `/events` ã¾ãŸã¯ `/admin/events` ã§ã‚¤ãƒ™ãƒ³ãƒˆä¸€è¦§ã‚’è¡¨ç¤º
   - ãã“ã‹ã‚‰å„ã‚¤ãƒ™ãƒ³ãƒˆã®è©³ç´°ãƒšãƒ¼ã‚¸ã¸ãƒªãƒ³ã‚¯

3. **middleware ã§æ¨©é™ãƒã‚§ãƒƒã‚¯**

   - `/admin/*` ã¯å½¹å“¡ã®ã¿
   - `/event_create` ã¯å½¹å“¡ã®ã¿
   - ãã®ä»–ã¯èªè¨¼æ¸ˆã¿ãƒ¦ãƒ¼ã‚¶ãƒ¼

4. **next.config.ts ã§ rewrites è¨­å®š**
   - æ–°ã—ã„ URL ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’æ®µéšçš„ã«å°å…¥
   - æ—¢å­˜ã® URL ã¯ç¶­æŒ

---

## ğŸ“Š ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°æ¯”è¼ƒè¡¨

| ãƒšãƒ¼ã‚¸             | ç¾åœ¨                 | æ¨å¥¨ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ Aï¼‰      | æ¨å¥¨ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ Bï¼‰                  |
| ------------------ | -------------------- | ------------------------- | ------------------------------------- |
| ã‚¤ãƒ™ãƒ³ãƒˆä½œæˆ       | `/event_create`      | `/admin/event/create`     | `/events/create`                      |
| å‡ºæ¼”ç”³ã—è¾¼ã¿       | `/entry_form`        | `/member/event-entry`     | `/events/[id]/entry`                  |
| å‡ºå¸­æ™‚é–“ç”³è«‹       | `/timetable-request` | `/member/availability`    | `/events/[id]/availability`           |
| ã‚¿ã‚¤ãƒ ãƒ†ãƒ¼ãƒ–ãƒ«è¡¨ç¤º | `/timetable`         | `/events/[id]/timetable`  | `/events/[id]/timetable`              |
| ã‚¿ã‚¤ãƒ ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ | ï¼ˆæœªå®Ÿè£…ï¼‰           | `/admin/timetable-create` | `/events/[id]/admin/timetable-create` |

---

## ğŸ¯ çµè«–ã¨æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³

### ç¾çŠ¶ç¶­æŒ + ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãƒªãƒ³ã‚¯ï¼ˆâœ… å®Œäº†ï¼‰

- çŸ­æœŸçš„ã«ã¯å•é¡Œãªã—
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰çµŒç”±ã§ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹

### æ¨å¥¨ã•ã‚Œã‚‹æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

1. **event_id ã‚’å‹•çš„ã«å–å¾—ã™ã‚‹ä»•çµ„ã¿**ï¼ˆå„ªå…ˆåº¦: é«˜ï¼‰
2. **ã‚¤ãƒ™ãƒ³ãƒˆä¸€è¦§ãƒšãƒ¼ã‚¸ä½œæˆ**ï¼ˆå„ªå…ˆåº¦: é«˜ï¼‰
3. **middleware ã§æ¨©é™ãƒã‚§ãƒƒã‚¯**ï¼ˆå„ªå…ˆåº¦: ä¸­ï¼‰
4. **next.config.ts ã§ rewrites è¨­å®š**ï¼ˆå„ªå…ˆåº¦: ä½ï¼‰
5. **æ®µéšçš„ã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç§»å‹•**ï¼ˆå„ªå…ˆåº¦: ä½ï¼‰

---

**æœ€çµ‚æ›´æ–°:** 2025 å¹´ 11 æœˆ 8 æ—¥
